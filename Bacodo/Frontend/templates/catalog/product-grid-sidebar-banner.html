{% extends "partials/base.html" %}
{% load static %}
{% block title %} Product Sidebar with Banner {% endblock title %}

{% block extra_css %}

<!-- nouisliderribute css -->
<link rel="stylesheet" href="{% static 'libs/nouislider/dist/nouislider.min.css' %}">
<link href="{% static 'css/category.css' %}" rel="stylesheet" type="text/css">

{% endblock extra_css %}

{% block content %}
<div class="position-relative section">
    <form action="" method="get">
        <!-- Thanh trượt lọc giá cả -->
        <div class="form-group">
            <label for="price-range">Price range:</label>
            <input type="range" id="price-range" name="price" min="0" max="1000" onchange="document.getElementById('price-value').innerHTML = this.value">
            <span id="price-value">500</span>
        </div>
        <!-- Lọc theo màu sắc -->
        {% if colors %}
        <div class="filter-options" id="color-options">
            <label>Colors:</label>
            {% with colors|slice:":60" as sliced_colors %}
                {% for color in sliced_colors %}
                    <button type="button" class="btn filter-btn" data-filter="color" data-value="{{ color.id }}" style="background-color: {{ color.hex }};"></button>
                {% endfor %}
            {% endwith %}
            {% if colors|length > 6 %}
                <button type="button" class="btn show-more" onclick="showMore('color')">Show more</button>
            {% endif %}
        </div>
        {% endif %}
        <!-- Lọc theo kích thước -->
        {% if sizes %}
        <div class="filter-options" id="size-options">
            <label>Sizes:</label>
            {% with sizes|slice:":10" as sliced_sizes %}
                {% for size in sliced_sizes %}
                    <button type="button" class="btn filter-btn" data-filter="size" data-value="{{ size.id }}">{{ size.name }}</button>
                {% endfor %}
            {% endwith %}
            {% if sizes|length > 10 %}
                <button type="button" class="btn show-more" onclick="showMore('size')">Show more</button>
            {% endif %}
        </div>
        {% endif %}
        <!-- Lọc theo loại sản phẩm -->
        {% if types %}
        <div class="filter-options" id="type-options">
            <label>Types:</label>
            {% with types|slice:":10" as sliced_types %}
                {% for type in sliced_types %}
                    <button type="button" class="btn filter-btn" data-filter="type" data-value="{{ type.id }}">{{ type.name }}</button>
                {% endfor %}
            {% endwith %}
            {% if types|length > 10 %}
                <button type="button" class="btn show-more" onclick="showMore('type')">Show more</button>
            {% endif %}
        </div>
        {% endif %}
        <!-- Lọc theo tùy chọn sản phẩm -->
        {% if options %}
        <div class="filter-options" id="option-options">
            <label>Options:</label>
            {% with options|slice:":10" as sliced_options %}
                {% for option in sliced_options %}
                    <button type="button" class="btn filter-btn" data-filter="option" data-value="{{ option.id }}">{{ option.name }}</button>
                {% endfor %}
            {% endwith %}
            {% if options|length > 10 %}
                <button type="button" class="btn show-more" onclick="showMore('option')">Show more</button>
            {% endif %}
        </div>
        {% endif %}
        <!-- Lọc theo chi tiết sản phẩm -->
        {% if details %}
        <div class="filter-options" id="detail-options">
            <label>Details:</label>
            {% with details|slice:":10" as sliced_details %}
                {% for detail in sliced_details %}
                    <button type="button" class="btn filter-btn" data-filter="details" data-value="{{ detail.id }}">{{ detail.name }}</button>
                {% endfor %}
            {% endwith %}
            {% if details|length > 10 %}
                <button type="button" class="btn show-more" onclick="showMore('detail')">Show more</button>
            {% endif %}
        </div>
        {% endif %}
        <!-- Lọc theo vị trí giao hàng -->
        {% if shipping_locations %}
        <div class="filter-options" id="shipping-location-options">
            <label>Shipping Locations:</label>
            {% with shipping_locations|slice:":10" as sliced_locations %}
                {% for location in sliced_locations %}
                    <button type="button" class="btn filter-btn" data-filter="shipping_location" data-value="{{ location.id }}">{{ location.name }}</button>
                {% endfor %}
            {% endwith %}
            {% if shipping_locations|length > 10 %}
                <button type="button" class="btn show-more" onclick="showMore('shipping_location')">Show more</button>
            {% endif %}
        </div>
        {% endif %}
        <button type="submit">Filter</button>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Thêm sự kiện click cho tất cả các nút lọc
        document.querySelectorAll('.filter-btn').forEach(function(button) {
            button.addEventListener('click', function() {
                var filterType = this.getAttribute('data-filter');
                var filterValue = this.getAttribute('data-value');
    
                // Hiển thị thông tin lọc được chọn hoặc thực hiện hành động khác
                console.log("Filter Type: " + filterType + ", Value: " + filterValue);
            });
        });
    
        // Xử lý sự kiện cho nút "Show more"
        document.querySelectorAll('.show-more').forEach(function(button) {
            button.addEventListener('click', function() {
                // Trích xuất loại bộ lọc từ thuộc tính onclick của nút
                var filterType = this.onclick.toString().match(/showMore\('(.+)'\)/)[1];
                
                // Hiển thị thêm các lựa chọn lọc hoặc tải thêm dữ liệu
                console.log("Show more for filter type: " + filterType);
            });
        });
    });
    </script>
</div>    
    <div class="flex-grow-1" id="col-3-layout">
        <div class="d-flex align-items-center gap-2 mb-4">
            <p class="text-muted flex-grow-1 mb-0">Showing results</p>
            <div class="flex-shrink-0">
                <div class="d-flex gap-2">
                    <div class="flex-shrink-0">
                        <label for="sort-elem" class="col-form-label">Sort By:</label>
                    </div>
                    <div class="flex-shrink-0">
                        <select class="form-select w-md" id="sort-elem">
                            <option value="">All</option>
                            <option value="low_to_high">Low to High</option>
                            <option value="high_to_low">High to Low</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" id="product-grid">
            {% for product in products %}
            <div class="col-xxl-3 col-lg-4 col-md-6">
                <div class="card ecommerce-product-widgets border-0 rounded-0 shadow-none overflow-hidden">
                    <div class="rounded position-relative product-image-category">
                        <img src="/media/{{product.image}}" alt="" style="max-width: 100%;aspect-ratio: 1/1;object-fit: cover;" class="mx-auto d-block rounded-2">
                        <div class="action vstack gap-2">
                            <button class="btn btn-danger avatar-xs p-0 btn-soft-warning custom-toggle product-action " data-bs-toggle="button">
                                <span class="icon-on"><i class="ri-heart-line"></i></span>
                                <span class="icon-off"><i class="ri-heart-fill"></i></span>
                            </button>
                        </div>
                    </div>
                    <div class="pt-2">
                        <div>
                            <a href="#!">
                                <h6 class="text-capitalize fs-15 lh-base text-truncate mb-0">{{ product.name }}</h6>
                            </a>
                            <div class="mt-2">
                                <span class="float-end">4.9 <i class="ri-star-half-fill text-warning align-bottom"></i></span>
                                <h5 class="text-secondary mb-0">${{ product.price }} <span class="text-muted fs-12"><del>${{ product.special_price }}</del></span></h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="row" id="pagination-element">
            <div class="col-lg-12">
              <div class="pagination">
                {% if products.has_previous %}
                  <a href="?page={{ products.previous_page_number }}" class="page-link">&laquo;</a>
                {% else %}
                  <span class="page-link disabled">&laquo;</span>
                {% endif %}
          
                {% if products.number > 4 %}
                  <a href="?page=1" class="page-link">1</a>
                  {% if products.number != 5 %}
                    <span class="page-link">...</span>
                  {% endif %}
                {% endif %}
          
                {% for num in products.paginator.page_range %}
                  {% if num >= products.number|add:'-3' and num <= products.number|add:'3' %}
                    {% if num == products.number %}
                      <a href="?page={{ num }}" class="page-link active">{{ num }}</a>
                    {% else %}
                      <a href="?page={{ num }}" class="page-link">{{ num }}</a>
                    {% endif %}
                  {% endif %}
                {% endfor %}
          
                {% if products.number < products.paginator.num_pages|add:'-3' %}
                  {% if products.number < products.paginator.num_pages|add:'-4' %}
                    <span class="page-link">...</span>
                  {% endif %}
                  <a href="?page={{ products.paginator.num_pages }}" class="page-link">{{ products.paginator.num_pages }}</a>
                {% endif %}
          
                {% if products.has_next %}
                  <a href="?page={{ products.next_page_number }}" class="page-link">&raquo;</a>
                {% else %}
                  <span class="page-link disabled">&raquo;</span>
                {% endif %}
          
                <span class="pagination-goto">Go to page</span>
                <input type="number" class="pagination-input" placeholder="{{ products.number }}" min="1" max="{{ products.paginator.num_pages }}">
                <span>/ {{ products.paginator.num_pages }}</span>
                <button class="pagination-confirm">confirm</button>
              </div>
            </div>
          </div>
          

<section class="section pt-0">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="d-flex align-items-center justify-content-between mb-4 pb-1">
                    <h3 class="flex-grow-1 mb-0">Deals Of The Day</h3>
                    <div class="flex-shrink-0">
                        <a href="#!" class="link-effect link-success">All Deals <i
                                class="ri-arrow-right-line ms-1 align-bottom"></i></a>
                    </div>
                </div>
            </div><!--end col-->
        </div><!--end row-->
        <div class="row">
            <div class="col-lg-4 col-md-6">
                <div class="ecommerce-deals-widgets">
                    <div class="card overflow-hidden mb-0">
                        <div class="gallery-product">
                            <img src="{% static 'images/ecommerce/img-5.jpg' %}" alt=""
                                class="mx-auto d-block object-fit-cover">
                        </div>
                    </div>
                    <div class="content mx-4">
                        <div class="countdown-deals mb-3">
                            <div data-countdown="Oct 30, 2023" class="countdownlist"></div>
                        </div>
                        <div class="card border-0 p-4 position-relative rounded-3 shadow-lg">
                            <a href="#!">
                                <h6 class="text-capitalize fs-16 lh-base text-truncate">World's most expensive
                                    t-shirt</h6>
                            </a>
                            <p class="text-muted"><i class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-half-fill text-warning align-bottom"></i> (4.9)</p>
                            <div class="mt-3 d-flex align-items-center">
                                <h5 class="text-secondary flex-grow-1 mb-0">$124.99 <span
                                        class="text-muted fs-12"><del>$354.99</del></span>
                                </h5>
                                <a href="#!" class="btn btn-primary btn-sm"><i
                                        class="ri-shopping-bag-line align-bottom me-1"></i> Add</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!--end col-->
            <div class="col-lg-4 col-md-6">
                <div class="ecommerce-deals-widgets">
                    <div class="card overflow-hidden mb-0">
                        <div class="gallery-product">
                            <img src="{% static 'images/ecommerce/img-3.jpg' %}" alt=""
                                class="mx-auto d-block object-fit-cover">
                        </div>
                    </div>
                    <div class="content mx-4">
                        <div class="countdown-deals mb-3">
                            <div data-countdown="Oct 23, 2023" class="countdownlist"></div>
                        </div>
                        <div class="card border-0 p-4 position-relative rounded-3 shadow-lg">
                            <a href="#!">
                                <h6 class="text-capitalize fs-16 lh-base text-truncate">Best Footwear Collections</h6>
                            </a>
                            <p class="text-muted"><i class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-half-fill text-warning align-bottom"></i> (4.3)</p>
                            <div class="mt-3 d-flex align-items-center">
                                <h5 class="text-secondary flex-grow-1 mb-0">$80.00 <span
                                        class="text-muted fs-12"><del>$180.00</del></span>
                                </h5>
                                <a href="#!" class="btn btn-primary btn-sm"><i
                                        class="ri-shopping-bag-line align-bottom me-1"></i> Add</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!--end col-->
            <div class="col-lg-4 col-md-6">
                <div class="ecommerce-deals-widgets">
                    <div class="card overflow-hidden mb-0">
                        <div class="gallery-product">
                            <img src="{% static 'images/ecommerce/img-1.jpg' %}" alt=""
                                class="mx-auto d-block object-fit-cover">
                        </div>
                    </div>
                    <div class="content mx-4">
                        <div class="countdown-deals mb-3">
                            <div data-countdown="Oct 20, 2023" class="countdownlist"></div>
                        </div>
                        <div class="card border-0 p-4 position-relative rounded-3 shadow-lg">
                            <a href="#!">
                                <h6 class="text-capitalize fs-16 lh-base text-truncate">Elegant Designer Western
                                    Dress</h6>
                            </a>
                            <p class="text-muted"><i class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-fill text-warning align-bottom"></i> <i
                                    class="ri-star-half-fill text-warning align-bottom"></i> (5.0)</p>
                            <div class="mt-3 d-flex align-items-center">
                                <h5 class="text-secondary flex-grow-1 mb-0">$30.10 <span
                                        class="text-muted fs-12"><del>$121.99</del></span>
                                </h5>
                                <a href="#!" class="btn btn-primary btn-sm"><i
                                        class="ri-shopping-bag-line align-bottom me-1"></i> Add</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!--end col-->
        </div><!--end row-->
    </div><!--end container-->
</section>

<section class="section bg-light bg-opacity-25"
    style="background-image: url({% static 'images/ecommerce/bg-effect.png' %});background-position: center; background-size: cover;">
    <div class="container">
        <div class="row align-items-center justify-content-between">
            <div class="col-lg-6">
                <div>
                    <p class="fs-15 text-uppercase fw-medium"><span class="fw-semibold text-danger">25% Up to</span> off
                        all Products</p>
                    <h1 class="lh-base text-capitalize mb-3">Stay home & get your daily needs from our shop</h1>
                    <p class="fs-15 mb-4 pb-2">Start You'r Daily Shopping with <a href="#!"
                            class="link-info fw-medium">Toner</a>
                    </p>
                    <form action="#!">
                        <div class="position-relative ecommerce-subscript">
                            <input type="email" class="form-control rounded-pill" placeholder="Enter your email">
                            <button type="submit" class="btn btn-primary btn-hover rounded-pill">Subscript Now</button>
                        </div>
                    </form>
                </div>
            </div><!--end col-->
            <div class="col-lg-4">
                <div class="mt-5 mt-lg-0">
                    <img src="{% static 'images/ecommerce/subscribe.png' %}" alt="" class="img-fluid">
                </div>
            </div><!--end col-->
        </div><!--end row-->
    </div><!--end conatiner-->
</section>

<section class="position-relative py-5">
    <div class="container">
        <div class="row gy-3 gy-lg-0">
            <div class="col-lg-3 col-sm-6">
                <div class="d-flex align-items-center gap-3">
                    <div class="flex-shrink-0">
                        <img src="{% static 'images/ecommerce/fast-delivery.png' %}" alt="" class="avatar-sm">
                    </div>
                    <div class="flex-grow-1">
                        <h5 class="fs-15">Fast &amp; Secure Delivery</h5>
                        <p class="text-muted mb-0">Tell about your service.</p>
                    </div>
                </div>
            </div><!--end col-->
            <div class="col-lg-3 col-sm-6">
                <div class="d-flex align-items-center gap-3">
                    <div class="flex-shrink-0">
                        <img src="{% static 'images/ecommerce/returns.png' %}" alt="" class="avatar-sm">
                    </div>
                    <div class="flex-grow-1">
                        <h5 class="fs-15">2 Days Return Policy</h5>
                        <p class="text-muted mb-0">No question ask.</p>
                    </div>
                </div>
            </div><!--end col-->
            <div class="col-lg-3 col-sm-6">
                <div class="d-flex align-items-center gap-3">
                    <div class="flex-shrink-0">
                        <img src="{% static 'images/ecommerce/guarantee-certificate.png' %}" alt="" class="avatar-sm">
                    </div>
                    <div class="flex-grow-1">
                        <h5 class="fs-15">Money Back Guarantee</h5>
                        <p class="text-muted mb-0">Within 5 business days</p>
                    </div>
                </div>
            </div><!--end col-->
            <div class="col-lg-3 col-sm-6">
                <div class="d-flex align-items-center gap-3">
                    <div class="flex-shrink-0">
                        <img src="{% static 'images/ecommerce/24-hours-support.png' %}" alt="" class="avatar-sm">
                    </div>
                    <div class="flex-grow-1">
                        <h5 class="fs-15">24 X 7 Service</h5>
                        <p class="text-muted mb-0">Online service for customer</p>
                    </div>
                </div>
            </div><!--end col-->
        </div><!--end row-->
    </div><!--end container-->
</section>

{% endblock content %}

{% block extra_js %}

<!-- nouisliderribute js -->
<script src="{% static 'libs/nouislider/dist/nouislider.min.js' %}"></script>
<script src="{% static 'libs/wnumb/wNumb.min.js' %}"></script>

<!-- Product-grid init js -->
<!-- <script src="{% static 'js/frontend/product-grid.init.js' %}"></script> -->
<!-- coming-soon -->
<script src="{% static 'js/pages/coming-soon.init.js' %}"></script>

<!-- landing-index js -->
<script src="{% static 'js/frontend/menu.init.js' %}"></script>

<script src="{% static 'js/frontend/pagination.js' %}"></script>

{% endblock extra_js%}